<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Learning Workflow Extension</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <h1>Learning Workflow</h1>
    
    <!-- Tab Navigation -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="steps">Steps</button>
      <button class="tab-btn" data-tab="config">Config</button>
    </div>
    
    <!-- Steps Tab -->
    <div id="stepsTab" class="tab-content active">
      <!-- Step 0: Select Chapter -->
    <div class="step">
      <h2>Step 0: Select Chapter</h2>
      <div class="input-group horizontal">
        <input 
          type="url" 
          id="kindleFileUrlForChapters" 
          placeholder="Paste Kindle highlights file URL here..."
          class="url-input"
        />
        <button id="loadChaptersBtn" class="action-btn">Load Chapters</button>
      </div>
      <div class="input-group" id="chapterSelectionGroup" style="display: none;">
        <label for="chapterSelect">Select a chapter:</label>
        <select id="chapterSelect" class="url-input">
          <option value="">-- Select a chapter --</option>
        </select>
      </div>
      <div id="step0Status" class="status"></div>
    </div>
    
    <!-- Step 1: Process Kindle Highlights -->
    <div class="step">
      <h2>Step 1: Process Kindle Highlights</h2>
      <div class="input-group horizontal">
        <input 
          type="url" 
          id="kindleFileUrl" 
          placeholder="Paste Kindle highlights file URL here..."
          class="url-input"
        />
        <button id="processKindleBtn" class="action-btn">Process Highlights</button>
      </div>
      <div id="step1Status" class="status"></div>
    </div>
    
    <!-- Step 2: Copy to Notion -->
    <div class="step">
      <h2>Step 2: Copy to Notion</h2>
      <div class="input-group horizontal">
        <input 
          type="url" 
          id="notionPageUrl" 
          placeholder="Paste Notion database/data source URL here..."
          class="url-input"
        />
        <button id="copyToNotionBtn" class="action-btn">Copy to Notion</button>
      </div>
      <div id="step2Status" class="status"></div>
    </div>
    
    <!-- Step 3: Export to NotebookLM -->
    <div class="step">
      <h2>Step 3: Export to NotebookLM</h2>
      <div class="input-group horizontal">
        <input 
          type="url" 
          id="notebooklmUrl" 
          placeholder="Paste NotebookLM notebook URL here..."
          class="url-input"
        />
        <button id="exportToNotebooklmBtn" class="action-btn">Export to NotebookLM</button>
      </div>
      <div id="step3Status" class="status"></div>
    </div>
    
    <!-- Step 4: Create Flashcards -->
    <div class="step">
      <h2>Step 4: Create Flashcards</h2>
      <div class="input-group">
        <button id="createFlashcardsBtn" class="action-btn">Create Flashcards</button>
      </div>
      <div id="step4Status" class="status"></div>
    </div>
    </div>
    
    <!-- Config Tab -->
    <div id="configTab" class="tab-content">
      <div class="step">
        <h2>API Keys & Configuration</h2>
        <div class="input-group">
          <label for="configGeminiApiKey">Gemini API Key</label>
          <input 
            type="password" 
            id="configGeminiApiKey" 
            placeholder="Enter Gemini API key (optional, for AI processing)..."
            class="url-input"
          />
          <p class="help-text">Used for AI-powered highlight processing in Step 1. Get your API key from <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a>.</p>
        </div>
        <div class="input-group">
          <label for="configNotionAuthToken">Notion Integration Token</label>
          <input 
            type="password" 
            id="configNotionAuthToken" 
            placeholder="Enter Notion integration token..."
            class="url-input"
          />
          <p class="help-text">Required for Step 2. Create an integration at <a href="https://www.notion.so/my-integrations" target="_blank">Notion Integrations</a> and grant it access to your workspace/database.</p>
        </div>
        <div id="configStatus" class="status"></div>
        <button id="saveConfigBtn" class="action-btn">Save Configuration</button>
      </div>
    </div>
  </div>
  <script type="module" src="popup.js"></script>
</body>
</html>
